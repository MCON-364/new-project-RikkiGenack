# Autograding configuration for GitHub Classroom
# - Detect presence of pom.xml (80 points)
# - Copy the provided autograder test into the project's test sources
# - Run `mvn test` and award remaining points if tests pass

# This file is intentionally simple and explicit so the autograder or a
# custom script can parse and execute the listed steps.
assignment:
  name: "new project"

autograding:
  grading:
    max_points: 100

  checks:
    - name: "has_pom_xml"
      description: "Repository contains a pom.xml"
      points: 80
      run: |
        if [ -f pom.xml ]; then
          echo "OK"; exit 0
        else
          echo "Missing pom.xml"; exit 1
        fi

  steps:
    - name: "copy_autograder_test"
      description: "Copy MainSignatureTest into src/test/java so it runs as part of mvn test"
      run: |
        mkdir -p src/test/java/mcon364/las/touro/edu
        cp .github/autograding_tests/mcon364/las/touro/edu/MainSignatureTest.java src/test/java/mcon364/las/touro/edu/

    - name: "run_maven_tests"
      description: "Run the project's unit tests with Maven; if they pass award remaining points"
      run: |
        mvn -q -DskipTests=false test
      points_on_success: 20

# Notes for graders:
# - The autograder should first execute the `has_pom_xml` check. If it succeeds,
#   award 80 points. Then run the `copy_autograder_test` step to ensure the
#   test is available in the test source tree, and then run `run_maven_tests`.
# - If `run_maven_tests` succeeds (exit 0) award the remaining 20 points.

